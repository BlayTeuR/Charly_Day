<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>À propos - Réstore</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden-checkbox {
            display: none;
        }
        #announcementToggle:checked + #announcement {
            display: none;
        }
        .dropdown:hover .dropdown-menu {
            display: block;
        }
        .dropdown-menu {
            display: none;
        }
        @keyframes blink-white {
            0% { filter: brightness(1); }
            50% { filter: brightness(2); }
            100% { filter: brightness(1); }
        }

        .blink-white {
            animation: blink-white 1s ease-in-out;
        }
    </style>
</head>
<body class="bg-white text-[#095434] min-h-screen flex flex-col">

<input type="checkbox" id="announcementToggle" class="hidden-checkbox">

<div id="announcement" class="bg-gray-200 text-[#095434] text-center text-sm py-2 relative">
    Livraison en 5 à 10 jours ouvrés | Retrait gratuit en magasin
    <label for="announcementToggle" class="absolute top-0 right-0 mt-1 mr-2 text-gray-600 hover:text-gray-800 cursor-pointer">
        &times;
    </label>
</div>

<header class="bg-[#81A969] text-white shadow-lg">
    <div class="container mx-auto flex items-center justify-between pt-2 px-6">
        <div class="flex items-center">
            <img src="../img/logo_1_vert_foncé.png" alt="Réstore Logo" class="h-20 pl-10">
        </div>
        <nav class="flex space-x-8">
            <div class="dropdown relative">
                <button class="px-4 py-2 font-semibold  hover:text-[#095434] transition duration-200" id="home_button">Accueil</button>
            </div>
            <div class="dropdown relative">
                <button class="px-4 py-2 font-semibold underline hover:text-[#095434] transition duration-200" id="apropos-button">À propos</button>
            </div>
        </nav>
        <div class="flex items-center space-x-4">
            <div class="relative">
                <input type="text" placeholder="Rechercher..." class="px-4 py-2 rounded-full text-black focus:outline-none focus:ring-2 focus:ring-[#095434]">
                <svg class="w-5 h-5 absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.9 14.32a8 8 0 111.414-1.414l4.387 4.387a1 1 0 01-1.414 1.414l-4.387-4.387zM14 8a6 6 0 11-12 0 6 6 0 0112 0z" clip-rule="evenodd"></path>
                </svg>
            </div>
            <a href="#" id="cartIcon">
                <img src="../img/cart.png" alt="Panier" class="h-8">
            </a>
            <div class="relative">
                <!-- Icône profil -->
                <a href="#" id="profileIcon" class="inline-block">
                    <img src="../img/baseProfil.png" alt="Profil" class="h-8">
                </a>

                <!-- Menu déroulant caché par défaut -->
                <div id="profileMenu" class="absolute right-0 mt-2 w-48 bg-white text-gray-700 shadow-lg rounded hidden">
                    <a id="loginOrLogoutLink" class="block px-4 py-2 hover:bg-gray-200" href="#">
                        <!-- On mettra le texte “Se connecter” ou “Se déconnecter” en JS -->
                    </a>
                </div>
            </div>
        </div>
    </div>
</header>

<main class="flex-grow bg-gray-50">
    <div class="container mx-auto py-10 px-6">
        <section class="bg-white shadow-lg rounded-lg p-8 mb-10">
            <h1 class="text-3xl font-bold text-center text-[#095434] mb-6">À propos de RéStore</h1>
            <p class="text-lg text-gray-700 leading-relaxed mb-4">
                Bienvenue sur RéStore, votre destination en ligne pour des produits de qualité à des prix compétitifs.
                Nous nous engageons à vous offrir une expérience d'achat fluide, rapide et agréable, tout en vous
                fournissant des informations détaillées sur chaque article que nous proposons.
            </p>
            <p class="text-lg text-gray-700 leading-relaxed mb-4">
                Notre mission est de rendre les produits électroménagers et le mobilier accessibles à tous, avec une
                approche responsable et durable. Nous sélectionnons soigneusement chaque produit pour vous garantir
                une qualité irréprochable, et nous travaillons avec des partenaires fiables pour vous assurer une
                livraison rapide et un service client exceptionnel.
            </p>
            <p class="text-lg text-gray-700 leading-relaxed mb-6">
                Chez Réstore, nous croyons que chaque achat doit être une expérience positive. C'est pourquoi nous
                mettons un point d'honneur à vous offrir une plateforme facile à utiliser, un service client à votre
                écoute et une large gamme de produits adaptés à vos besoins et à votre budget.
            </p>
            <p class="text-lg text-gray-700 leading-relaxed mb-6">
                Si vous avez des questions, des suggestions ou souhaitez en savoir plus, n'hésitez pas à nous
                contacter. Nous sommes là pour vous aider à faire le meilleur choix et à profiter pleinement de vos
                achats.
            </p>

            <!-- Section de remerciement -->
            <section class="bg-gray-100 p-6 rounded-lg text-center my-8">
                <h2 class="text-xl font-semibold text-[#095434] mb-4">Un grand merci à nos précieux partenaires :</h2>
                <p class="text-lg text-gray-700">La Fabrique &nbsp;|&nbsp; De Laine en rêves</p>
                <p class="text-sm text-gray-500 mt-2">Grâce à leur soutien, Réstore continue de grandir et de vous offrir le meilleur.</p>
            </section>
        </section>
    </div>
</main>

<footer class="bg-[#81A969] text-white text-center py-4">
    <p>&copy; 2025 Réstore - Tous droits réservés - <a href="mailto:contact@fly.fr" class="underline">Contactez-nous</a></p>
</footer>

</body>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("home_button").addEventListener("click", function () {
            window.location.href = "/";  // Redirige vers la page à propos
        });
        const profileIcon = document.getElementById("profileIcon");
        const profileMenu = document.getElementById("profileMenu");
        const loginOrLogoutLink = document.getElementById("loginOrLogoutLink");

        // Vérifier si l'utilisateur est connecté
        fetch("/api/is-logged-in", { credentials: "include" })
            .then(res => res.json())
            .then(data => {
                if (data.loggedIn) {
                    // Connecté => “Se déconnecter”
                    loginOrLogoutLink.textContent = "Se déconnecter";
                    // On veut, au clic, appeler /api/auth/logout puis recharger la page
                    loginOrLogoutLink.addEventListener("click", (e) => {
                        e.preventDefault();
                        fetch("/api/auth/logout")
                            .then(() => {
                                // On recharge la page, ou on redirige vers '/'
                                window.location.reload();
                            })
                            .catch(err => console.error("Erreur logout:", err));
                    });
                } else {
                    // Non connecté => “Se connecter”
                    loginOrLogoutLink.textContent = "Se connecter";
                    // On met un href = "/login"
                    loginOrLogoutLink.setAttribute("href", "/login");
                }
            })
            .catch(err => {
                console.error("Erreur is-logged-in:", err);
                // Par défaut, on propose “Se connecter”
                loginOrLogoutLink.textContent = "Se connecter";
                loginOrLogoutLink.href = "/login";
            });

        // Clic sur l’icône => toggle du menu
        profileIcon.addEventListener("click", (e) => {
            e.preventDefault();
            profileMenu.classList.toggle("hidden");
        });

        // Fermer le menu si clic en dehors
        document.addEventListener("click", (event) => {
            if (!profileMenu.contains(event.target) && !profileIcon.contains(event.target)) {
                profileMenu.classList.add("hidden");
            }
        });
    });
</script>
</html>
